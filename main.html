<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kommentare</title>
    <!-- Firebase SDK einbinden -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"></script>
</head>
<body>
    <h1>Kommentare</h1>
    
    <!-- Formular zum Hinterlassen eines Kommentars -->
    <form id="commentForm">
        <label for="username">Name:</label>
        <input type="text" id="username" required><br><br>
        <label for="comment">Kommentar:</label><br>
        <textarea id="comment" rows="4" cols="50" required></textarea><br><br>
        <button type="submit">Kommentar absenden</button>
    </form>

    <h2>Kommentare:</h2>
    <div id="commentsContainer"></div>

    <!-- Firebase initialisieren -->
    <script>
        // Firebase-Konfiguration (ersetze mit deinen eigenen Firebase-Config-Daten)
        const firebaseConfig = {
            apiKey: "DEIN_API_KEY",
            authDomain: "DEIN_AUTH_DOMAIN",
            databaseURL: "DEIN_DATABASE_URL",
            projectId: "DEIN_PROJECT_ID",
            storageBucket: "DEIN_STORAGE_BUCKET",
            messagingSenderId: "DEIN_MESSAGING_SENDER_ID",
            appId: "DEIN_APP_ID"
        };

        // Firebase App initialisieren
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Kommentare anzeigen
        function loadComments() {
            const commentsRef = database.ref("comments");
            commentsRef.on("value", (snapshot) => {
                const comments = snapshot.val();
                const commentsContainer = document.getElementById("commentsContainer");
                commentsContainer.innerHTML = ""; // Alte Kommentare löschen

                // Kommentare aus der Firebase-Datenbank holen und anzeigen
                for (let id in comments) {
                    const comment = comments[id];
                    const div = document.createElement("div");
                    div.innerHTML = `<strong>${comment.username}</strong>: <p>${comment.comment}</p><hr>`;
                    commentsContainer.appendChild(div);
                }
            });
        }

        loadComments();

        // Kommentar absenden
        document.getElementById("commentForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const username = document.getElementById("username").value;
            const commentText = document.getElementById("comment").value;

            if (username && commentText) {
                const commentsRef = database.ref("comments");
                commentsRef.push({
                    username: username,
                    comment: commentText
                });

                // Felder zurücksetzen
                document.getElementById("username").value = "";
                document.getElementById("comment").value = "";
            }
        });
    </script>
</body>
</html>
